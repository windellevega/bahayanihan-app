<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button class="back-button" *ngIf="isWorker === '1'" defaultHref="/worker-main/tabs/account-tab"></ion-back-button>
      <ion-back-button class="back-button" *ngIf="isWorker === '0'" defaultHref="/main/tabs/account-tab"></ion-back-button>
    </ion-buttons>
    <ion-title>Recent Messages</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-item (click)="loadMessages(conversation.id, conversation.users[0].id, conversation.users[0].firstname, conversation.users[0].profile_picture_url)" *ngFor="let conversation of conversations">
    <ion-avatar slot="start">
      <img [src]="conversation.users[0].profile_picture_url">
    </ion-avatar>
    <ion-label *ngIf="conversation.unread_messages_count > 0">
      <h2><strong>{{ conversation.users[0].firstname }} {{ conversation.users[0].lastname }}</strong></h2>
      <p><strong>{{ conversation.latest_message.message }}</strong></p>
    </ion-label>
    <ion-label *ngIf="conversation.unread_messages_count == 0">
      <h2>{{ conversation.users[0].firstname }} {{ conversation.users[0].lastname }}</h2>
      <p>{{ conversation.latest_message.message }}</p>
    </ion-label>
    <ion-badge color="danger" slot="end" *ngIf="conversation.unread_messages_count > 0">{{ conversation.unread_messages_count }}</ion-badge>
  </ion-item>
</ion-content>
